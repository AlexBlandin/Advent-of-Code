from functools import reduce
a=[(l[0],int(l.strip()[1:])) for l in open("data/day12-1.txt").readlines()]
(x,y,d), (sx,sy,wx,wy) = reduce(lambda o,t: (lambda x,y,d,i,v: ((x if i not in "EWF" else x+v if i=="E" or (i=="F" and d==0) else x-v if i=="W" or (i=="F" and d==2) else x), (y if i not in "NSF" else y+v if i=="N" or (i=="F" and d==3) else y-v if i=="S" or (i=="F" and d==1) else y), (d if i not in "LR" else (d+v//90)%4 if i=="R" else (d-v//90)%4)))(*o,*t), a, (0,0,0)), reduce(lambda o,t: (lambda sx,sy,wx,wy,i,v: ((sx if i!="F" else (sx_:=(wx-sx)*v+sx) ), (sy if i!="F" else (sy_:=(wy-sy)*v+sy) ), (wx+v if i=="E" else wx-v if i=="W" else (wx-sx+sx_) if i=="F" else (-(wy-sy)+sy if v in [90,270] else -wx ) if (i=="L" and v!=270) or (i=="R" and v==270) else (wy if v in [90,270] else -wx ) if (i=="R" and v!=270) or (i=="L" and v==270) else wx), (wy+v if i=="N" else wy-v if i=="S" else (wy-sy+sy_) if i=="F" else (wx if v in [90,270] else -wy ) if (i=="L" and v!=270) or (i=="R" and v==270) else (-(wx-sx)+sx if v in [90,270] else -wy ) if (i=="R" and v!=270) or (i=="L" and v==270) else wx) ))(*o,*t), a, (0,0,10,1))
print(abs(x)+abs(y), abs(sx)+abs(sy))